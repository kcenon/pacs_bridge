# PACS Bridge 검증 보고서 (Validation Report)

> **보고서 버전:** 0.1.0.0
> **보고서 일자:** 2025-12-07
> **언어:** [English](VALIDATION_REPORT.md) | **한국어**
> **상태:** 구현 전 단계 (검증 계획됨)
> **참조 프로젝트:** [pacs_system](../../pacs_system) v0.2.0+

---

## 요약

이 **검증 보고서(Validation Report)**는 PACS Bridge의 구현이 소프트웨어 요구사항 명세서(SRS)에 명시된 모든 요구사항을 충족하도록 계획된 검증 활동을 문서화합니다.

> **Validation (검증)**: "올바른 제품을 만들고 있는가?"
> - 구현이 SRS 요구사항을 충족하는지 확인
> - 시스템 테스트 → 기능 요구사항 (SRS-xxx)
> - 인수 테스트 → 사용자 요구사항 및 유스케이스

> **참고**: **Verification (확인)**(SDS 설계 준수)에 대해서는 [VERIFICATION_REPORT_KO.md](VERIFICATION_REPORT_KO.md)를 참조하세요.

### 전체 상태: **Phase 0 - 구현 전 단계 (검증 계획됨)**

| 카테고리 | 요구사항 | 계획된 테스트 | 상태 |
|----------|----------|---------------|------|
| **HL7 게이트웨이 모듈** | 6 | 6 | ⏳ Phase 1 |
| **MLLP 전송** | 3 | 3 | ⏳ Phase 1 |
| **FHIR 게이트웨이 모듈** | 4 | 4 | ⏳ Phase 3 |
| **변환 계층** | 5 | 5 | ⏳ Phase 1-3 |
| **메시지 라우팅** | 3 | 3 | ⏳ Phase 1-2 |
| **pacs_system 통합** | 3 | 3 | ⏳ Phase 1-2 |
| **구성** | 2 | 2 | ⏳ Phase 1-2 |
| **성능** | 6 | 6 | ⏳ Phase 4 |
| **신뢰성** | 5 | 5 | ⏳ Phase 2-4 |
| **보안** | 5 | 5 | ⏳ Phase 2-4 |
| **확장성** | 4 | 4 | ⏳ Phase 4 |
| **유지보수성** | 5 | 5 | ⏳ Phase 1-4 |
| **총계** | **51** | **51** | **⏳ 계획됨** |

---

## 1. V-모델 컨텍스트

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              V-모델 추적성                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  요구사항                                                    테스트          │
│  ────────                                                   ──────          │
│                                                                              │
│  ┌──────────┐                                      ┌──────────────────┐     │
│  │   PRD    │◄────────────────────────────────────►│   인수 테스트     │     │
│  │(제품)    │                                      │ (사용자 시나리오) │     │
│  └────┬─────┘                                      └──────────────────┘     │
│       │                                                     ▲               │
│       ▼                                                     │               │
│  ┌──────────┐        ═══════════════════          ┌─────────┴────────┐     │
│  │   SRS    │◄═══════   이 문서        ═══════════►│  시스템 테스트    │     │
│  │(소프트웨어)│       (VALIDATION REPORT)          │ (SRS 준수 확인)  │     │
│  └────┬─────┘        ═══════════════════          └──────────────────┘     │
│       │                                                     ▲               │
│       ▼                                                     │               │
│  ┌──────────┐                                      ┌────────┴─────────┐     │
│  │   SDS    │◄────────────────────────────────────►│  통합 테스트      │     │
│  │ (설계)   │       VERIFICATION_REPORT.md         │  (SDS 모듈)      │     │
│  └────┬─────┘                                      └──────────────────┘     │
│       │                                                     ▲               │
│       ▼                                                     │               │
│  ┌──────────┐                                      ┌────────┴─────────┐     │
│  │   코드   │◄────────────────────────────────────►│   단위 테스트     │     │
│  │(모듈)    │       VERIFICATION_REPORT.md         │  (SDS 상세)      │     │
│  └──────────┘                                      └──────────────────┘     │
│                                                                              │
│  범례:                                                                       │
│    ═══► Validation: "올바른 제품을 만들고 있는가?" (SRS 요구사항 충족 확인)   │
│    ───► Verification: "제품을 올바르게 만들고 있는가?" (SDS 설계대로 구현 확인)│
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 2. 기능 요구사항 검증 계획

### 2.1 HL7 게이트웨이 모듈 (SRS-HL7)

#### SRS-HL7-001: HL7 v2.x 메시지 파싱

| 속성 | 값 |
|------|-----|
| **요구사항** | 표준 구분자, 이스케이프 시퀀스, 반복 필드, 커스텀 Z-세그먼트를 지원하여 HL7 v2.x 메시지(v2.3.1 ~ v2.9) 파싱 |
| **우선순위** | 필수 |
| **단계** | 1 |
| **검증 방법** | 시스템 테스트 |
| **테스트 ID** | VAL-HL7-001 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | 표준 세그먼트 구분자 파싱 (\|^~\\&) | 단위 테스트 | ⏳ Phase 1 |
| 2 | 이스케이프 시퀀스 처리 (\\F\\, \\S\\, \\R\\, \\E\\, \\T\\) | 단위 테스트 | ⏳ Phase 1 |
| 3 | ~ 구분자를 사용한 반복 필드 지원 | 단위 테스트 | ⏳ Phase 1 |
| 4 | 컴포넌트/서브컴포넌트 분리 지원 | 단위 테스트 | ⏳ Phase 1 |
| 5 | 모든 표준 세그먼트 데이터 추출 | 통합 테스트 | ⏳ Phase 1 |

**계획된 테스트 케이스:**

| 테스트 케이스 | 설명 | 유형 |
|---------------|------|------|
| VAL-HL7-001-01 | 표준 구분자가 포함된 ORM^O01 파싱 | 단위 |
| VAL-HL7-001-02 | 이스케이프 시퀀스가 포함된 메시지 파싱 | 단위 |
| VAL-HL7-001-03 | 반복 식별자가 있는 PID 파싱 | 단위 |
| VAL-HL7-001-04 | 서브컴포넌트가 있는 복잡한 OBR 파싱 | 단위 |
| VAL-HL7-001-05 | 커스텀 ZDS 세그먼트가 있는 메시지 파싱 | 단위 |

**상태:** ⏳ **검증 계획됨 (Phase 1)**

---

#### SRS-HL7-002: ADT 메시지 처리

| 속성 | 값 |
|------|-----|
| **요구사항** | 환자 인구통계 캐시를 유지하고 MWL 항목을 업데이트하기 위해 ADT 메시지(A01, A04, A08, A40) 처리 |
| **우선순위** | 필수 |
| **단계** | 1 |
| **검증 방법** | 통합 테스트 |
| **테스트 ID** | VAL-HL7-002 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | ADT^A01 (입원) 처리 - 환자 레코드 생성 | 통합 | ⏳ Phase 1 |
| 2 | ADT^A04 (등록) 처리 - 외래 환자 레코드 생성 | 통합 | ⏳ Phase 1 |
| 3 | ADT^A08 (업데이트) 처리 - 인구통계 업데이트 | 통합 | ⏳ Phase 1 |
| 4 | ADT^A40 (병합) 처리 - 환자 레코드 병합 | 통합 | ⏳ Phase 1 |
| 5 | 환자 업데이트 시 모든 관련 MWL 항목 업데이트 | 시스템 | ⏳ Phase 1 |

**ADT-환자 캐시 매핑 검증:**

| HL7 필드 | 캐시 필드 | 검증 |
|----------|----------|------|
| PID-3 | patient_id | ⏳ Phase 1 |
| PID-3.4 | issuer | ⏳ Phase 1 |
| PID-5 | patient_name | ⏳ Phase 1 |
| PID-7 | birth_date | ⏳ Phase 1 |
| PID-8 | sex | ⏳ Phase 1 |

**상태:** ⏳ **검증 계획됨 (Phase 1)**

---

#### SRS-HL7-003: ORM 메시지 처리

| 속성 | 값 |
|------|-----|
| **요구사항** | 오더 제어 코드를 기반으로 MWL 항목을 생성, 업데이트, 취소 및 관리하기 위해 ORM^O01 메시지 처리 |
| **우선순위** | 필수 |
| **단계** | 1 |
| **검증 방법** | 통합 테스트 |
| **테스트 ID** | VAL-HL7-003 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | ORC-1 = NW (신규 오더) 시 MWL 항목 생성 | 통합 | ⏳ Phase 1 |
| 2 | ORC-1 = XO (오더 변경) 시 MWL 항목 업데이트 | 통합 | ⏳ Phase 1 |
| 3 | ORC-1 = CA (취소 요청) 시 MWL 항목 취소 | 통합 | ⏳ Phase 1 |
| 4 | ORC-1 = SC (상태 변경) 시 상태 변경 처리 | 통합 | ⏳ Phase 1 |
| 5 | ORC-1 = DC 시 중단 지원 | 통합 | ⏳ Phase 1 |

**오더 제어 처리 검증:**

| ORC-1 | ORC-5 | 예상 동작 | MWL 상태 | 검증 |
|-------|-------|----------|----------|------|
| NW | SC | 신규 항목 생성 | SCHEDULED | ⏳ Phase 1 |
| NW | IP | 생성 후 시작 표시 | STARTED | ⏳ Phase 1 |
| XO | SC | 기존 항목 업데이트 | SCHEDULED | ⏳ Phase 1 |
| CA | CA | 항목 삭제 | (삭제됨) | ⏳ Phase 1 |
| SC | IP | 상태 → 진행 중 | STARTED | ⏳ Phase 1 |
| SC | CM | 상태 → 완료 | COMPLETED | ⏳ Phase 1 |

**상태:** ⏳ **검증 계획됨 (Phase 1)**

---

#### SRS-HL7-004: ORU 메시지 생성

| 속성 | 값 |
|------|-----|
| **요구사항** | 예비 및 최종 리포트 상태를 포함한 리포트 상태 알림을 위해 ORU^R01 메시지 생성 |
| **우선순위** | 권장 |
| **단계** | 2 |
| **검증 방법** | 통합 테스트 |
| **테스트 ID** | VAL-HL7-004 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | 예비 리포트용 ORU^R01 생성 (OBR-25 = P) | 통합 | ⏳ Phase 2 |
| 2 | 최종 리포트용 ORU^R01 생성 (OBR-25 = F) | 통합 | ⏳ Phase 2 |
| 3 | LOINC 코드가 포함된 적절한 OBX 세그먼트 포함 | 통합 | ⏳ Phase 2 |
| 4 | 리포트 수정 지원 (OBR-25 = C) | 통합 | ⏳ Phase 2 |
| 5 | 의뢰 의사 정보 포함 | 통합 | ⏳ Phase 2 |

**상태:** ⏳ **검증 계획됨 (Phase 2)**

---

#### SRS-HL7-005: SIU 메시지 처리

| 속성 | 값 |
|------|-----|
| **요구사항** | 예약 생성, 수정 및 취소를 지원하여 스케줄링 업데이트를 위해 SIU^S12-S15 메시지 처리 |
| **우선순위** | 권장 |
| **단계** | 2 |
| **검증 방법** | 통합 테스트 |
| **테스트 ID** | VAL-HL7-005 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | SIU^S12 (신규 예약) 처리 | 통합 | ⏳ Phase 2 |
| 2 | SIU^S13 (재예약) 처리 | 통합 | ⏳ Phase 2 |
| 3 | SIU^S14 (수정) 처리 | 통합 | ⏳ Phase 2 |
| 4 | SIU^S15 (취소) 처리 | 통합 | ⏳ Phase 2 |
| 5 | MWL 스케줄링 정보 업데이트 | 시스템 | ⏳ Phase 2 |

**상태:** ⏳ **검증 계획됨 (Phase 2)**

---

#### SRS-HL7-006: ACK 응답 생성

| 속성 | 값 |
|------|-----|
| **요구사항** | 적절한 오류 코드와 설명을 포함한 올바른 HL7 ACK 응답(AA, AE, AR) 생성 |
| **우선순위** | 필수 |
| **단계** | 1 |
| **검증 방법** | 시스템 테스트 |
| **테스트 ID** | VAL-HL7-006 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | 성공 시 AA (Application Accept) 생성 | 단위 | ⏳ Phase 1 |
| 2 | 비즈니스 로직 오류 시 AE (Application Error) 생성 | 단위 | ⏳ Phase 1 |
| 3 | 시스템 오류 시 AR (Application Reject) 생성 | 단위 | ⏳ Phase 1 |
| 4 | 오류 세부 정보가 포함된 ERR 세그먼트 포함 | 단위 | ⏳ Phase 1 |
| 5 | MSA-2에 원본 MSH-10 에코 | 단위 | ⏳ Phase 1 |

**ACK 응답 검증:**

```
입력:  OBR-4가 누락된 ORM^O01
출력: MSH|...|ACK^O01|...
      MSA|AE|OriginalMsgID|Missing required field
      ERR|||207^Application internal error^HL70357|E|||OBR-4 required
```

**상태:** ⏳ **검증 계획됨 (Phase 1)**

---

### 2.2 MLLP 전송 모듈 (SRS-MLLP)

#### SRS-MLLP-001: MLLP 서버 구현

| 속성 | 값 |
|------|-----|
| **요구사항** | 수신 HL7 연결을 대기하고, 메시지 프레이밍을 처리하며, 동시 연결을 지원하는 MLLP 서버 구현 |
| **우선순위** | 필수 |
| **단계** | 1 |
| **검증 방법** | 시스템 테스트 |
| **테스트 ID** | VAL-MLLP-001 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | 구성 가능한 TCP 포트에서 대기 (기본 2575) | 시스템 | ⏳ Phase 1 |
| 2 | MLLP 프레이밍 처리 (VT=0x0B, FS=0x1C, CR=0x0D) | 단위 | ⏳ Phase 1 |
| 3 | 동시 연결 지원 (≥50) | 부하 테스트 | ⏳ Phase 1 |
| 4 | 구성 가능한 연결 타임아웃 | 시스템 | ⏳ Phase 1 |
| 5 | 연결 유지(Keep-alive) 지원 | 시스템 | ⏳ Phase 1 |

**MLLP 프레임 검증:**

```
예상 프레임 구조:
<0x0B>HL7 메시지 내용<0x1C><0x0D>

테스트 케이스:
- 완전한 메시지가 있는 유효한 프레임
- 분할된 프레임 재조립
- 잘못된 프레임 감지 및 거부
```

**상태:** ⏳ **검증 계획됨 (Phase 1)**

---

#### SRS-MLLP-002: MLLP 클라이언트 구현

| 속성 | 값 |
|------|-----|
| **요구사항** | 연결 풀링과 재시도 지원을 통해 원격 시스템에 HL7 메시지를 전송하기 위한 MLLP 클라이언트 구현 |
| **우선순위** | 필수 |
| **단계** | 1 |
| **검증 방법** | 통합 테스트 |
| **테스트 ID** | VAL-MLLP-002 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | 구성 가능한 호스트 및 포트에 연결 | 통합 | ⏳ Phase 1 |
| 2 | 발신 메시지에 MLLP 프레이밍 적용 | 단위 | ⏳ Phase 1 |
| 3 | ACK 응답 대기 및 검증 | 통합 | ⏳ Phase 1 |
| 4 | 지속 연결을 위한 연결 풀링 | 시스템 | ⏳ Phase 1 |
| 5 | 지수 백오프를 통한 구성 가능한 재시도 | 시스템 | ⏳ Phase 1 |

**상태:** ⏳ **검증 계획됨 (Phase 1)**

---

#### SRS-MLLP-003: TLS를 통한 MLLP

| 속성 | 값 |
|------|-----|
| **요구사항** | 인증서 검증을 통해 안전한 HL7 메시지 전송을 위해 TLS 1.2/1.3을 통한 MLLP 지원 |
| **우선순위** | 권장 |
| **단계** | 2 |
| **검증 방법** | 보안 테스트 |
| **테스트 ID** | VAL-MLLP-003 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | TLS 1.2 및 TLS 1.3 지원 | 보안 | ⏳ Phase 2 |
| 2 | 서버 인증서 검증 | 보안 | ⏳ Phase 2 |
| 3 | 선택적 클라이언트 인증서 (상호 TLS) | 보안 | ⏳ Phase 2 |
| 4 | 구성 가능한 암호화 스위트 | 보안 | ⏳ Phase 2 |
| 5 | 인증서 체인 검증 | 보안 | ⏳ Phase 2 |

**상태:** ⏳ **검증 계획됨 (Phase 2)**

---

### 2.3 FHIR 게이트웨이 모듈 (SRS-FHIR)

#### SRS-FHIR-001: FHIR REST 서버

| 속성 | 값 |
|------|-----|
| **요구사항** | 표준 CRUD 작업과 함께 JSON 및 XML 형식을 지원하는 FHIR R4 호환 REST 서버 구현 |
| **우선순위** | 권장 |
| **단계** | 3 |
| **검증 방법** | 시스템 테스트 |
| **테스트 ID** | VAL-FHIR-001 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | 리소스용 RESTful API 엔드포인트 | 시스템 | ⏳ Phase 3 |
| 2 | JSON 및 XML 콘텐츠 협상 | 시스템 | ⏳ Phase 3 |
| 3 | 표준 HTTP 메서드 (GET, POST, PUT, DELETE) | 시스템 | ⏳ Phase 3 |
| 4 | 검색 파라미터 지원 | 시스템 | ⏳ Phase 3 |
| 5 | 대용량 결과 집합에 대한 페이지네이션 | 시스템 | ⏳ Phase 3 |

**상태:** ⏳ **검증 계획됨 (Phase 3)**

---

#### SRS-FHIR-002: Patient 리소스

| 속성 | 값 |
|------|-----|
| **요구사항** | 내부 환자 캐시에 매핑하여 읽기 및 검색 작업이 가능한 FHIR Patient 리소스 지원 |
| **우선순위** | 권장 |
| **단계** | 3 |
| **검증 방법** | 통합 테스트 |
| **테스트 ID** | VAL-FHIR-002 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | GET /Patient/{id} - 환자 조회 | 통합 | ⏳ Phase 3 |
| 2 | GET /Patient?identifier=xxx - ID로 검색 | 통합 | ⏳ Phase 3 |
| 3 | GET /Patient?name=xxx - 이름으로 검색 | 통합 | ⏳ Phase 3 |
| 4 | 내부 환자 인구통계에 매핑 | 통합 | ⏳ Phase 3 |
| 5 | 환자 식별자 시스템 지원 | 통합 | ⏳ Phase 3 |

**상태:** ⏳ **검증 계획됨 (Phase 3)**

---

#### SRS-FHIR-003: ServiceRequest 리소스

| 속성 | 값 |
|------|-----|
| **요구사항** | 수신 요청에서 MWL 항목을 생성하여 영상 오더를 위한 FHIR ServiceRequest 지원 |
| **우선순위** | 권장 |
| **단계** | 3 |
| **검증 방법** | 통합 테스트 |
| **테스트 ID** | VAL-FHIR-003 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | POST /ServiceRequest - 오더 생성 | 통합 | ⏳ Phase 3 |
| 2 | GET /ServiceRequest/{id} - 오더 조회 | 통합 | ⏳ Phase 3 |
| 3 | GET /ServiceRequest?patient=xxx - 환자로 검색 | 통합 | ⏳ Phase 3 |
| 4 | DICOM MWL 항목에 매핑 | 통합 | ⏳ Phase 3 |
| 5 | 오더 상태 업데이트 지원 | 통합 | ⏳ Phase 3 |

**상태:** ⏳ **검증 계획됨 (Phase 3)**

---

#### SRS-FHIR-004: ImagingStudy 리소스

| 속성 | 값 |
|------|-----|
| **요구사항** | 스터디 가용성 알림 및 쿼리를 위해 FHIR ImagingStudy 리소스 지원 |
| **우선순위** | 권장 |
| **단계** | 3 |
| **검증 방법** | 통합 테스트 |
| **테스트 ID** | VAL-FHIR-004 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | GET /ImagingStudy/{id} - 스터디 조회 | 통합 | ⏳ Phase 3 |
| 2 | GET /ImagingStudy?patient=xxx - 환자로 검색 | 통합 | ⏳ Phase 3 |
| 3 | GET /ImagingStudy?status=xxx - 상태로 검색 | 통합 | ⏳ Phase 3 |
| 4 | 시리즈 및 인스턴스 개수 포함 | 통합 | ⏳ Phase 3 |
| 5 | ServiceRequest 참조 | 통합 | ⏳ Phase 3 |

**상태:** ⏳ **검증 계획됨 (Phase 3)**

---

### 2.4 변환 계층 (SRS-TRANS)

#### SRS-TRANS-001: HL7-DICOM MWL 매퍼

| 속성 | 값 |
|------|-----|
| **요구사항** | IHE SWF 프로파일 매핑에 따라 HL7 ORM 메시지 필드를 DICOM Modality Worklist 속성으로 변환 |
| **우선순위** | 필수 |
| **단계** | 1 |
| **검증 방법** | 시스템 테스트 |
| **테스트 ID** | VAL-TRANS-001 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | PID 세그먼트를 Patient Module에 매핑 | 단위 | ⏳ Phase 1 |
| 2 | ORC/OBR을 Imaging Service Request에 매핑 | 단위 | ⏳ Phase 1 |
| 3 | OBR을 Scheduled Procedure Step Sequence에 매핑 | 단위 | ⏳ Phase 1 |
| 4 | ZDS-1을 Study Instance UID에 매핑 | 단위 | ⏳ Phase 1 |
| 5 | 프로시저 코드 매핑 처리 | 단위 | ⏳ Phase 1 |

**핵심 매핑 검증:**

| HL7 필드 | DICOM 태그 | 검증 |
|----------|-----------|------|
| PID-3 | (0010,0020) PatientID | ⏳ Phase 1 |
| PID-5 | (0010,0010) PatientName | ⏳ Phase 1 |
| PID-7 | (0010,0030) PatientBirthDate | ⏳ Phase 1 |
| PID-8 | (0010,0040) PatientSex | ⏳ Phase 1 |
| ORC-2 | (0040,2016) PlacerOrderNumber | ⏳ Phase 1 |
| ORC-3 | (0008,0050) AccessionNumber | ⏳ Phase 1 |
| OBR-4.1 | (0008,0100) CodeValue | ⏳ Phase 1 |
| OBR-7 | (0040,0002/3) ScheduledDate/Time | ⏳ Phase 1 |
| OBR-24 | (0008,0060) Modality | ⏳ Phase 1 |
| ZDS-1 | (0020,000D) StudyInstanceUID | ⏳ Phase 1 |

**상태:** ⏳ **검증 계획됨 (Phase 1)**

---

#### SRS-TRANS-002: DICOM MPPS-HL7 ORM 매퍼

| 속성 | 값 |
|------|-----|
| **요구사항** | DICOM MPPS 알림을 HL7 ORM 상태 업데이트 메시지로 변환 |
| **우선순위** | 필수 |
| **단계** | 2 |
| **검증 방법** | 통합 테스트 |
| **테스트 ID** | VAL-TRANS-002 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | MPPS IN PROGRESS를 ORC-5 = IP에 매핑 | 통합 | ⏳ Phase 2 |
| 2 | MPPS COMPLETED를 ORC-5 = CM에 매핑 | 통합 | ⏳ Phase 2 |
| 3 | MPPS DISCONTINUED를 ORC-5 = CA에 매핑 | 통합 | ⏳ Phase 2 |
| 4 | 프로시저 타이밍 정보 포함 | 통합 | ⏳ Phase 2 |
| 5 | 원본 오더 참조 | 통합 | ⏳ Phase 2 |

**MPPS 상태 매핑 검증:**

| MPPS 상태 | ORC-1 | ORC-5 | 검증 |
|-----------|-------|-------|------|
| IN PROGRESS | SC | IP | ⏳ Phase 2 |
| COMPLETED | SC | CM | ⏳ Phase 2 |
| DISCONTINUED | DC | CA | ⏳ Phase 2 |

**상태:** ⏳ **검증 계획됨 (Phase 2)**

---

#### SRS-TRANS-003: 환자 이름 형식 변환

| 속성 | 값 |
|------|-----|
| **요구사항** | 구성요소 순서 차이를 처리하여 HL7 XPN과 DICOM PN 이름 형식 간 변환 |
| **우선순위** | 필수 |
| **단계** | 1 |
| **검증 방법** | 단위 테스트 |
| **테스트 ID** | VAL-TRANS-003 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | HL7 XPN 형식 파싱 (Family^Given^Middle^Suffix^Prefix) | 단위 | ⏳ Phase 1 |
| 2 | DICOM PN 형식으로 변환 (Family^Given^Middle^Prefix^Suffix) | 단위 | ⏳ Phase 1 |
| 3 | 누락된 구성요소 처리 | 단위 | ⏳ Phase 1 |
| 4 | 다중 값 이름 지원 | 단위 | ⏳ Phase 1 |
| 5 | 특수 문자 보존 | 단위 | ⏳ Phase 1 |

**형식 변환 테스트:**

```
입력:  DOE^JOHN^ANDREW^JR^MR (HL7 XPN)
출력: DOE^JOHN^ANDREW^MR^JR (DICOM PN)
```

**상태:** ⏳ **검증 계획됨 (Phase 1)**

---

#### SRS-TRANS-004: 날짜/시간 형식 변환

| 속성 | 값 |
|------|-----|
| **요구사항** | HL7 DTM과 DICOM DA/TM 날짜/시간 형식 간 변환 |
| **우선순위** | 필수 |
| **단계** | 1 |
| **검증 방법** | 단위 테스트 |
| **테스트 ID** | VAL-TRANS-004 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | HL7 DTM 파싱 (YYYYMMDDHHMMSS.SSSS±ZZZZ) | 단위 | ⏳ Phase 1 |
| 2 | DICOM DA 추출 (YYYYMMDD) | 단위 | ⏳ Phase 1 |
| 3 | DICOM TM 추출 (HHMMSS.FFFFFF) | 단위 | ⏳ Phase 1 |
| 4 | 시간대 변환 처리 | 단위 | ⏳ Phase 1 |
| 5 | 부분 정밀도 처리 | 단위 | ⏳ Phase 1 |

**상태:** ⏳ **검증 계획됨 (Phase 1)**

---

#### SRS-TRANS-005: FHIR-DICOM 매퍼

| 속성 | 값 |
|------|-----|
| **요구사항** | FHIR ServiceRequest 리소스를 DICOM MWL 항목으로 변환 |
| **우선순위** | 권장 |
| **단계** | 3 |
| **검증 방법** | 통합 테스트 |
| **테스트 ID** | VAL-TRANS-005 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | Patient 참조를 Patient Module에 매핑 | 통합 | ⏳ Phase 3 |
| 2 | ServiceRequest.code를 Requested Procedure에 매핑 | 통합 | ⏳ Phase 3 |
| 3 | ServiceRequest.occurrence를 SPS Start Date/Time에 매핑 | 통합 | ⏳ Phase 3 |
| 4 | ServiceRequest.performer를 Scheduled AE Title에 매핑 | 통합 | ⏳ Phase 3 |
| 5 | 제공되지 않은 경우 Study Instance UID 생성 | 통합 | ⏳ Phase 3 |

**상태:** ⏳ **검증 계획됨 (Phase 3)**

---

### 2.5 메시지 라우팅 모듈 (SRS-ROUTE)

#### SRS-ROUTE-001: 수신 메시지 라우터

| 속성 | 값 |
|------|-----|
| **요구사항** | 메시지 유형 및 트리거 이벤트를 기반으로 수신 메시지를 적절한 핸들러로 라우팅 |
| **우선순위** | 필수 |
| **단계** | 1 |
| **검증 방법** | 시스템 테스트 |
| **테스트 ID** | VAL-ROUTE-001 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | ADT 메시지를 환자 캐시 핸들러로 라우팅 | 시스템 | ⏳ Phase 1 |
| 2 | ORM 메시지를 MWL 관리자로 라우팅 | 시스템 | ⏳ Phase 1 |
| 3 | MSH-9 (메시지 유형)을 기반으로 라우팅 | 시스템 | ⏳ Phase 1 |
| 4 | 조건부 라우팅 규칙 지원 | 시스템 | ⏳ Phase 1 |
| 5 | 라우팅 결정 로깅 | 시스템 | ⏳ Phase 1 |

**라우팅 테이블 검증:**

| 메시지 유형 | 트리거 | 핸들러 | 검증 |
|------------|--------|--------|------|
| ADT | A01, A04, A08, A40 | PatientCacheHandler | ⏳ Phase 1 |
| ORM | O01 | MWLManager | ⏳ Phase 1 |
| SIU | S12-S15 | SchedulingHandler | ⏳ Phase 2 |

**상태:** ⏳ **검증 계획됨 (Phase 1)**

---

#### SRS-ROUTE-002: 발신 메시지 라우터

| 속성 | 값 |
|------|-----|
| **요구사항** | 장애 조치 지원과 함께 구성된 대상으로 발신 메시지 라우팅 |
| **우선순위** | 필수 |
| **단계** | 2 |
| **검증 방법** | 시스템 테스트 |
| **테스트 ID** | VAL-ROUTE-002 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | MPPS 알림을 RIS로 라우팅 | 시스템 | ⏳ Phase 2 |
| 2 | ORU 리포트를 구성된 엔드포인트로 라우팅 | 시스템 | ⏳ Phase 2 |
| 3 | 다중 대상 지원 | 시스템 | ⏳ Phase 2 |
| 4 | 장애 조치 라우팅 구현 | 시스템 | ⏳ Phase 2 |
| 5 | 전달 상태 추적 | 시스템 | ⏳ Phase 2 |

**상태:** ⏳ **검증 계획됨 (Phase 2)**

---

#### SRS-ROUTE-003: 메시지 큐 관리자

| 속성 | 값 |
|------|-----|
| **요구사항** | 재시도 로직과 지속성을 통해 신뢰성 있는 전달을 위해 발신 메시지 큐잉 |
| **우선순위** | 필수 |
| **단계** | 1 |
| **검증 방법** | 시스템 테스트 |
| **테스트 ID** | VAL-ROUTE-003 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | 비동기 전달을 위한 메시지 큐잉 | 시스템 | ⏳ Phase 1 |
| 2 | 지수 백오프를 통한 재시도 | 시스템 | ⏳ Phase 1 |
| 3 | 메시지 우선순위 지원 | 시스템 | ⏳ Phase 1 |
| 4 | 충돌 복구를 위한 큐 지속성 | 시스템 | ⏳ Phase 2 |
| 5 | 실패한 메시지를 위한 데드 레터 큐 | 시스템 | ⏳ Phase 2 |

**재시도 전략 검증:**

```
시도 1: 즉시
시도 2: 5초
시도 3: 30초
시도 4: 2분
시도 5: 10분
최대 시도: 5 (구성 가능)
```

**상태:** ⏳ **검증 계획됨 (Phase 1-2)**

---

### 2.6 pacs_system 통합 (SRS-PACS)

#### SRS-PACS-001: MWL 항목 관리

| 속성 | 값 |
|------|-----|
| **요구사항** | DICOM 또는 직접 데이터베이스 접근을 통해 pacs_system에서 MWL 항목 생성, 업데이트 및 삭제 |
| **우선순위** | 필수 |
| **단계** | 1 |
| **검증 방법** | 통합 테스트 |
| **테스트 ID** | VAL-PACS-001 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | ORM^O01에서 MWL 항목 생성 | 통합 | ⏳ Phase 1 |
| 2 | 오더 변경 시 MWL 항목 업데이트 | 통합 | ⏳ Phase 1 |
| 3 | 취소 시 MWL 항목 삭제 | 통합 | ⏳ Phase 1 |
| 4 | 중복 감지 처리 | 통합 | ⏳ Phase 1 |
| 5 | 배치 작업 지원 | 통합 | ⏳ Phase 1 |

**상태:** ⏳ **검증 계획됨 (Phase 1)**

---

#### SRS-PACS-002: MPPS 이벤트 처리

| 속성 | 값 |
|------|-----|
| **요구사항** | pacs_system에서 MPPS N-CREATE 및 N-SET 알림을 수신하고 HL7 메시지로 변환 |
| **우선순위** | 필수 |
| **단계** | 2 |
| **검증 방법** | 통합 테스트 |
| **테스트 ID** | VAL-PACS-002 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | MPPS 이벤트 리스너로 등록 | 통합 | ⏳ Phase 2 |
| 2 | N-CREATE (IN PROGRESS) 수신 | 통합 | ⏳ Phase 2 |
| 3 | N-SET (COMPLETED/DISCONTINUED) 수신 | 통합 | ⏳ Phase 2 |
| 4 | HL7 ORM 상태 메시지 생성 | 통합 | ⏳ Phase 2 |
| 5 | 구성된 RIS 엔드포인트로 전송 | 통합 | ⏳ Phase 2 |

**상태:** ⏳ **검증 계획됨 (Phase 2)**

---

#### SRS-PACS-003: 환자 캐시 동기화

| 속성 | 값 |
|------|-----|
| **요구사항** | MWL 쿼리를 위해 HIS ADT 이벤트와 동기화된 환자 인구통계 캐시 유지 |
| **우선순위** | 필수 |
| **단계** | 1 |
| **검증 방법** | 통합 테스트 |
| **테스트 ID** | VAL-PACS-003 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | ADT에서 환자 인구통계 캐싱 | 통합 | ⏳ Phase 1 |
| 2 | ADT^A08 (업데이트) 시 업데이트 | 통합 | ⏳ Phase 1 |
| 3 | ADT^A40 (병합) 처리 | 통합 | ⏳ Phase 1 |
| 4 | Patient ID로 조회 제공 | 통합 | ⏳ Phase 1 |
| 5 | 시간 기반 캐시 만료 | 통합 | ⏳ Phase 1 |

**상태:** ⏳ **검증 계획됨 (Phase 1)**

---

### 2.7 구성 모듈 (SRS-CFG)

#### SRS-CFG-001: 엔드포인트 구성

| 속성 | 값 |
|------|-----|
| **요구사항** | HL7 리스너 포트, 발신 대상 및 pacs_system 연결 구성 지원 |
| **우선순위** | 필수 |
| **단계** | 1 |
| **검증 방법** | 시스템 테스트 |
| **테스트 ID** | VAL-CFG-001 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | HL7 리스너 포트 구성 | 시스템 | ⏳ Phase 1 |
| 2 | 발신 HL7 대상 구성 | 시스템 | ⏳ Phase 1 |
| 3 | pacs_system 연결 구성 | 시스템 | ⏳ Phase 1 |
| 4 | 구성 파일 지원 (YAML) | 시스템 | ⏳ Phase 1 |
| 5 | 핫 리로드 지원 (Phase 3) | 시스템 | ⏳ Phase 3 |

**구성 예시 검증:**

```yaml
server:
  name: "PACS_BRIDGE"

hl7:
  listener:
    port: 2575
    tls: false
    max_connections: 50

  outbound:
    - name: "RIS"
      host: "ris.hospital.local"
      port: 2576
      retry_count: 3

pacs_system:
  host: "localhost"
  port: 11112
  ae_title: "PACS_BRIDGE"
```

**상태:** ⏳ **검증 계획됨 (Phase 1)**

---

#### SRS-CFG-002: 매핑 구성

| 속성 | 값 |
|------|-----|
| **요구사항** | 모달리티-AE-타이틀, 프로시저 코드 및 환자 ID 도메인에 대한 구성 가능한 매핑 지원 |
| **우선순위** | 권장 |
| **단계** | 2 |
| **검증 방법** | 시스템 테스트 |
| **테스트 ID** | VAL-CFG-002 |

**인수 기준:**

| # | 기준 | 검증 방법 | 상태 |
|---|------|----------|------|
| 1 | 모달리티-AE 타이틀 매핑 구성 | 시스템 | ⏳ Phase 2 |
| 2 | 프로시저 코드 매핑 구성 | 시스템 | ⏳ Phase 2 |
| 3 | 환자 ID 도메인 매핑 구성 | 시스템 | ⏳ Phase 2 |
| 4 | 커스텀 필드 매핑 지원 | 시스템 | ⏳ Phase 2 |
| 5 | 로드 시 구성 검증 | 시스템 | ⏳ Phase 2 |

**상태:** ⏳ **검증 계획됨 (Phase 2)**

---

## 3. 비기능 요구사항 검증 계획

### 3.1 성능 (SRS-PERF)

| 요구사항 ID | 요구사항 | 목표 | 검증 방법 | 단계 |
|-------------|----------|------|----------|------|
| SRS-PERF-001 | HL7 메시지 처리량 | ≥500 msg/s | 부하 테스트 | 4 |
| SRS-PERF-002 | 메시지 지연시간 (P50) | <20 ms | 벤치마크 | 4 |
| SRS-PERF-003 | 메시지 지연시간 (P95) | <50 ms | 벤치마크 | 4 |
| SRS-PERF-004 | 메시지 지연시간 (P99) | <100 ms | 벤치마크 | 4 |
| SRS-PERF-005 | 동시 연결 | ≥50 | 스트레스 테스트 | 4 |
| SRS-PERF-006 | 메모리 기준선 | <200 MB | 프로파일링 | 4 |

**검증 방법:** 시뮬레이션된 HL7 트래픽으로 부하 테스트

**계획된 테스트 환경:**
- CPU: 4코어 이상
- 메모리: 8 GB 이상
- 네트워크: 1 Gbps
- 동시 클라이언트: 50개 이상

**상태:** ⏳ **검증 계획됨 (Phase 4)**

---

### 3.2 신뢰성 (SRS-REL)

| 요구사항 ID | 요구사항 | 목표 | 검증 방법 | 단계 |
|-------------|----------|------|----------|------|
| SRS-REL-001 | 시스템 가동시간 | 99.9% | RAII 설계 리뷰 | 1-4 |
| SRS-REL-002 | 메시지 전달 | 100% | 통합 테스트 | 2 |
| SRS-REL-003 | 그레이스풀 저하 | 고부하 시 | 스트레스 테스트 | 4 |
| SRS-REL-004 | 오류 복구 | 자동 | 통합 테스트 | 2 |
| SRS-REL-005 | 큐 지속성 | 재시작 시 유지 | 시스템 테스트 | 2 |

**검증 방법:** 스트레스 테스트, 장애 주입

**상태:** ⏳ **검증 계획됨 (Phase 1-4)**

---

### 3.3 보안 (SRS-SEC)

| 요구사항 ID | 요구사항 | 목표 | 검증 방법 | 단계 |
|-------------|----------|------|----------|------|
| SRS-SEC-001 | TLS 지원 | TLS 1.2/1.3 | 보안 감사 | 2 |
| SRS-SEC-002 | 접근 로깅 | 완전 | 감사 리뷰 | 1 |
| SRS-SEC-003 | 감사 추적 | HIPAA 준수 | 규정 준수 감사 | 4 |
| SRS-SEC-004 | 입력 검증 | 100% | 보안 테스트 | 1 |
| SRS-SEC-005 | 인증서 관리 | X.509 | 보안 테스트 | 2 |

**계획된 보안 테스트:**
- AddressSanitizer: 메모리 오류 탐지
- LeakSanitizer: 메모리 누수 탐지
- ThreadSanitizer: 데이터 경합 탐지
- TLS 암호화 스위트 검증

**상태:** ⏳ **검증 계획됨 (Phase 1-4)**

---

### 3.4 확장성 (SRS-SCALE)

| 요구사항 ID | 요구사항 | 목표 | 검증 방법 | 단계 |
|-------------|----------|------|----------|------|
| SRS-SCALE-001 | 수평 확장 | 지원 | 아키텍처 리뷰 | 4 |
| SRS-SCALE-002 | 일일 메시지량 | ≥100K | 부하 테스트 | 4 |
| SRS-SCALE-003 | MWL 항목 용량 | ≥10K | 용량 테스트 | 4 |
| SRS-SCALE-004 | 연결 풀링 | 효율적 | 성능 테스트 | 4 |

**상태:** ⏳ **검증 계획됨 (Phase 4)**

---

### 3.5 유지보수성 (SRS-MAINT)

| 요구사항 ID | 요구사항 | 목표 | 검증 방법 | 단계 |
|-------------|----------|------|----------|------|
| SRS-MAINT-001 | 코드 커버리지 | ≥80% | CI/CD | 1-4 |
| SRS-MAINT-002 | 문서화 | 완전 | 리뷰 | 1-4 |
| SRS-MAINT-003 | CI/CD 파이프라인 | 100% 그린 | 자동화 | 1 |
| SRS-MAINT-004 | 구성 | 외부화 | 코드 리뷰 | 1 |
| SRS-MAINT-005 | 로깅 | 구조화된 JSON | 코드 리뷰 | 1 |

**상태:** ⏳ **검증 계획됨 (Phase 1-4)**

---

## 4. 인수 테스트 계획

### 4.1 사용자 시나리오 검증 (계획됨)

| 시나리오 | 설명 | 단계 | 상태 |
|----------|------|------|------|
| **US-001** | RIS가 HL7 ORM을 통해 영상 오더 전송 | 1 | ⏳ 계획됨 |
| **US-002** | 모달리티가 Worklist 쿼리 후 MWL 수신 | 1 | ⏳ 계획됨 |
| **US-003** | 모달리티가 MPPS 전송, RIS가 상태 업데이트 수신 | 2 | ⏳ 계획됨 |
| **US-004** | 환자 인구통계 업데이트가 MWL에 전파 | 1 | ⏳ 계획됨 |
| **US-005** | 오더 취소 시 MWL 항목 제거 | 1 | ⏳ 계획됨 |
| **US-006** | EMR이 FHIR ServiceRequest로 오더 생성 | 3 | ⏳ 계획됨 |
| **US-007** | 보안 TLS HL7 통신 | 2 | ⏳ 계획됨 |

### 4.2 IHE SWF 프로파일 적합성 (계획됨)

| IHE 트랜잭션 | IHE ID | PACS Bridge 역할 | 검증 단계 |
|-------------|--------|------------------|-----------|
| Placer Order Management | RAD-2 | 수신자 | Phase 1 |
| Filler Order Management | RAD-3 | 발신자 | Phase 2 |
| Procedure Scheduled | RAD-4 | 발신자 | Phase 1 |
| Modality PS In Progress | RAD-6 | 수신자 | Phase 2 |
| Modality PS Completed | RAD-7 | 수신자 | Phase 2 |

---

## 5. 추적성 매트릭스

### 5.1 SRS에서 검증 테스트로의 매핑

| SRS ID | 검증 테스트 | 테스트 유형 | 단계 |
|--------|-------------|-------------|------|
| SRS-HL7-001 | VAL-HL7-001 | 시스템 테스트 | 1 |
| SRS-HL7-002 | VAL-HL7-002 | 통합 | 1 |
| SRS-HL7-003 | VAL-HL7-003 | 통합 | 1 |
| SRS-HL7-004 | VAL-HL7-004 | 통합 | 2 |
| SRS-HL7-005 | VAL-HL7-005 | 통합 | 2 |
| SRS-HL7-006 | VAL-HL7-006 | 시스템 테스트 | 1 |
| SRS-MLLP-001 | VAL-MLLP-001 | 시스템 테스트 | 1 |
| SRS-MLLP-002 | VAL-MLLP-002 | 통합 | 1 |
| SRS-MLLP-003 | VAL-MLLP-003 | 보안 테스트 | 2 |
| SRS-FHIR-001 | VAL-FHIR-001 | 시스템 테스트 | 3 |
| SRS-FHIR-002 | VAL-FHIR-002 | 통합 | 3 |
| SRS-FHIR-003 | VAL-FHIR-003 | 통합 | 3 |
| SRS-FHIR-004 | VAL-FHIR-004 | 통합 | 3 |
| SRS-TRANS-001 | VAL-TRANS-001 | 시스템 테스트 | 1 |
| SRS-TRANS-002 | VAL-TRANS-002 | 통합 | 2 |
| SRS-TRANS-003 | VAL-TRANS-003 | 단위 테스트 | 1 |
| SRS-TRANS-004 | VAL-TRANS-004 | 단위 테스트 | 1 |
| SRS-TRANS-005 | VAL-TRANS-005 | 통합 | 3 |
| SRS-ROUTE-001 | VAL-ROUTE-001 | 시스템 테스트 | 1 |
| SRS-ROUTE-002 | VAL-ROUTE-002 | 시스템 테스트 | 2 |
| SRS-ROUTE-003 | VAL-ROUTE-003 | 시스템 테스트 | 1-2 |
| SRS-PACS-001 | VAL-PACS-001 | 통합 | 1 |
| SRS-PACS-002 | VAL-PACS-002 | 통합 | 2 |
| SRS-PACS-003 | VAL-PACS-003 | 통합 | 1 |
| SRS-CFG-001 | VAL-CFG-001 | 시스템 테스트 | 1 |
| SRS-CFG-002 | VAL-CFG-002 | 시스템 테스트 | 2 |
| SRS-PERF-001~006 | 성능 테스트 | 부하 테스트 | 4 |
| SRS-REL-001~005 | 신뢰성 테스트 | 스트레스 테스트 | 1-4 |
| SRS-SEC-001~005 | 보안 테스트 | 보안 감사 | 1-4 |
| SRS-SCALE-001~004 | 확장성 테스트 | 용량 테스트 | 4 |
| SRS-MAINT-001~005 | 유지보수성 리뷰 | 코드 리뷰 | 1-4 |

### 5.2 커버리지 요약 (계획됨)

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    SRS 요구사항 검증 커버리지                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   카테고리              총계   계획됨    단계                              │
│   ────────              ────   ──────   ────                              │
│                                                                          │
│   HL7 게이트웨이 모듈     6       6     Phase 1-2                         │
│   MLLP 전송              3       3     Phase 1-2                         │
│   FHIR 게이트웨이 모듈    4       4     Phase 3                           │
│   변환 계층              5       5     Phase 1-3                         │
│   메시지 라우팅           3       3     Phase 1-2                         │
│   pacs_system 통합       3       3     Phase 1-2                         │
│   구성                   2       2     Phase 1-2                         │
│   성능                   6       6     Phase 4                           │
│   신뢰성                 5       5     Phase 1-4                         │
│   보안                   5       5     Phase 1-4                         │
│   확장성                 4       4     Phase 4                           │
│   유지보수성             5       5     Phase 1-4                         │
│   ────────────────────────────────────────────────────────────────────  │
│   총계                  51      51     Phase 1-4                         │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 6. pacs_system 검증과 비교

### 6.1 검증 접근 방식 정렬

| 측면 | pacs_system | pacs_bridge | 정렬 |
|------|-------------|-------------|------|
| **V-모델 추적성** | PRD→SRS→SDS→Code→Tests | PRD→SRS→SDS→Code→Tests | ✅ 정렬됨 |
| **테스트 카테고리** | 시스템, 통합, 단위, 인수 | 시스템, 통합, 단위, 인수 | ✅ 정렬됨 |
| **인수 기준** | 요구사항별 상세 | 요구사항별 상세 | ✅ 정렬됨 |
| **성능 지표** | 정량적 목표 | 정량적 목표 | ✅ 정렬됨 |
| **보안 테스트** | Sanitizers, TLS 검증 | Sanitizers, TLS 검증 | ✅ 정렬됨 |
| **이중 언어** | EN + KO | EN + KO | ✅ 정렬됨 |

### 6.2 요구사항 커버리지 비교

| 카테고리 | pacs_system | pacs_bridge |
|----------|-------------|-------------|
| 기능 요구사항 | 30 | 26 |
| 비기능 요구사항 | 19 | 25 |
| **총 요구사항** | **49** | **51** |
| **검증 상태** | 100% 검증됨 | 100% 계획됨 |

---

## 7. 단계별 검증 일정

### 7.1 Phase 1 (1-6주차): 핵심 HL7 게이트웨이

| 검증 ID | 요구사항 | 우선순위 |
|---------|----------|----------|
| VAL-HL7-001 | HL7 v2.x 메시지 파싱 | 필수 |
| VAL-HL7-002 | ADT 메시지 처리 | 필수 |
| VAL-HL7-003 | ORM 메시지 처리 | 필수 |
| VAL-HL7-006 | ACK 응답 생성 | 필수 |
| VAL-MLLP-001 | MLLP 서버 | 필수 |
| VAL-MLLP-002 | MLLP 클라이언트 | 필수 |
| VAL-TRANS-001 | HL7-DICOM MWL 매퍼 | 필수 |
| VAL-TRANS-003 | 환자 이름 변환 | 필수 |
| VAL-TRANS-004 | 날짜/시간 변환 | 필수 |
| VAL-ROUTE-001 | 수신 메시지 라우터 | 필수 |
| VAL-ROUTE-003 | 메시지 큐 관리자 | 필수 |
| VAL-PACS-001 | MWL 항목 관리 | 필수 |
| VAL-PACS-003 | 환자 캐시 | 필수 |
| VAL-CFG-001 | 엔드포인트 구성 | 필수 |

### 7.2 Phase 2 (7-10주차): MPPS 및 양방향

| 검증 ID | 요구사항 | 우선순위 |
|---------|----------|----------|
| VAL-HL7-004 | ORU 메시지 생성 | 권장 |
| VAL-HL7-005 | SIU 메시지 처리 | 권장 |
| VAL-MLLP-003 | TLS를 통한 MLLP | 권장 |
| VAL-TRANS-002 | DICOM MPPS-HL7 매퍼 | 필수 |
| VAL-ROUTE-002 | 발신 메시지 라우터 | 필수 |
| VAL-PACS-002 | MPPS 이벤트 처리 | 필수 |
| VAL-CFG-002 | 매핑 구성 | 권장 |

### 7.3 Phase 3 (11-16주차): FHIR 및 리포팅

| 검증 ID | 요구사항 | 우선순위 |
|---------|----------|----------|
| VAL-FHIR-001 | FHIR REST 서버 | 권장 |
| VAL-FHIR-002 | Patient 리소스 | 권장 |
| VAL-FHIR-003 | ServiceRequest 리소스 | 권장 |
| VAL-FHIR-004 | ImagingStudy 리소스 | 권장 |
| VAL-TRANS-005 | FHIR-DICOM 매퍼 | 권장 |

### 7.4 Phase 4 (17-20주차): 프로덕션 강화

| 검증 ID | 요구사항 | 우선순위 |
|---------|----------|----------|
| VAL-PERF-001~006 | 성능 테스트 | 필수 |
| VAL-SCALE-001~004 | 확장성 테스트 | 권장 |
| VAL-SEC-001~005 | 보안 감사 | 필수 |
| VAL-REL-001~005 | 신뢰성 테스트 | 필수 |

---

## 8. 결론

### 8.1 검증 계획 요약

PACS Bridge는 pacs_system과 정렬된 포괄적인 검증 계획을 갖추고 있습니다:

| 측면 | 상태 |
|------|------|
| **기능 요구사항** | 26개 요구사항에 대한 테스트 계획됨 |
| **비기능 요구사항** | 25개 요구사항에 대한 테스트 계획됨 |
| **사용자 시나리오** | 7개 인수 테스트 계획됨 |
| **IHE SWF 적합성** | 5개 트랜잭션 계획됨 |
| **총 검증 테스트** | 51개 계획됨 |

### 8.2 준비도 평가

| 측면 | 상태 | 신뢰도 |
|------|------|--------|
| 요구사항 완전성 | ✅ 완료 | 높음 |
| 설계 완전성 | ✅ 완료 | 높음 |
| 검증 계획 | ✅ 완료 | 높음 |
| 테스트 케이스 설계 | ⏳ 대기 | 중간 |
| Phase 1 준비 완료 | ✅ 준비됨 | 높음 |

**검증 계획 상태: 완료**

---

## 부록 A: 개정 이력

| 버전 | 일자 | 작성자 | 변경사항 |
|------|------|--------|----------|
| 1.0.0 | 2025-12-07 | kcenon@naver.com | 초기 검증 계획 (구현 전) |

---

## 부록 B: 용어집

| 용어 | 정의 |
|------|------|
| **Validation (검증)** | 요구사항이 사용자 니즈를 충족하는지 확인 ("올바른 제품") |
| **Verification (확인)** | 구현이 설계와 일치하는지 확인 ("제품을 올바르게") |
| **SRS** | 소프트웨어 요구사항 명세서 |
| **인수 테스트** | 사용자 시나리오 완료를 확인하는 테스트 |
| **시스템 테스트** | 기능 요구사항 준수를 확인하는 테스트 |

---

## 부록 C: 관련 문서

| 문서 | 용도 | 링크 |
|------|------|------|
| SRS_KO.md | 소프트웨어 요구사항 명세서 | [SRS_KO.md](SRS_KO.md) |
| SDS_KO.md | 소프트웨어 설계 명세서 | [SDS_KO.md](SDS_KO.md) |
| SDS_TRACEABILITY_KO.md | 설계 추적성 | [SDS_TRACEABILITY_KO.md](SDS_TRACEABILITY_KO.md) |
| VERIFICATION_REPORT_KO.md | 설계 확인 | [VERIFICATION_REPORT_KO.md](VERIFICATION_REPORT_KO.md) |
| PRD_KO.md | 제품 요구사항 문서 | [PRD_KO.md](PRD_KO.md) |

---

*보고서 버전: 0.1.0.0*
*생성일: 2025-12-07*
*검증자: kcenon@naver.com*
